extends ../layout

block content
  h1 Patron: 
    =title
  |     
  form(action="/patrons/" + patron.id + "?_method=PUT", method="post")
    include errors
    p
      label(for='first_name') First Name
      input#first_name(type='text', value=patron.first_name name="first_name")
    |         
    p
      label(for='last_name') Last Name
      input#last_name(type='text', value=patron.last_name name="last_name")
    |         
    p
      label(for='address')  Address
      input#address(type='text', value=patron.address name="address")
    |         
    p
      label(for='email') Email
      input#email(type='text', value=patron.email name="email")
    |         
    p
      label(for='library_id') Library ID
      input#library_id(type='text', value=patron.library_id name="library_id")
    |         
    p
      label(for='zip_code') Zip Code
      input#zip_code(type='text', value=patron.zip_code name="zip_code")
    |         
    p
      input(type='submit', value='Update')
  |     
  h2 Loan History
  |     
  table
    thead
      tr
        th Book
        |                 
        th Patron 
        |                 
        th Loaned on
        |                 
        th Return by 
        |                 
        th Returned on
        |                 
        th Action
    |         
    tbody
      each result in results
        tr
          td
            a(href='/books/' + result.book.id)=result.book.title
          |                 
          td
            a(href='/patrons/' + result.patron.id)
              =result.patron.first_name 
              | 
              =result.patron.last_name
          |                 
          td= result.loaned_on
          |                 
          td= result.return_by
          |                 
          td= result.returned_on
          |                 
          td
            if (result.returned_on === null)
              a.button(href='/loans/' + result.id + '/return') Return Book
